var Client=function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"geoNames",(function(){return a})),n.d(t,"weatherBit",(function(){return o})),n.d(t,"pixaBay",(function(){return r})),n.d(t,"submit",(function(){return p})),n.d(t,"postReq",(function(){return s})),n.d(t,"updateUi",(function(){return y}));var a=async e=>{const t=document.querySelector("#place").value;await fetch("http://api.geonames.org/searchJSON?formatted=true&q="+t+"&username=mohammedkhaled").then(e=>e.json()).then(t=>{e.city=t.geonames[0].name,e.country=t.geonames[0].countryName,e.lat=t.geonames[0].lat,e.lng=t.geonames[0].lng,console.log(`City: ${e.city}\nCountry: ${e.country}\nLat: ${e.lat}\nLng: ${e.lng}`),Client.postReq("http://localhost:8080/addCity",e)})};var o=async e=>{const t="lat="+e.lat,n="&lon="+e.lng;await fetch("https://api.weatherbit.io/v2.0/current?"+t+n+"&key=d0f5c1f734b046ab967782d301218719").then(e=>e.json()).then(t=>{e.weather=t.data[0].weather.description,e.temp=t.data[0].temp,e.timezone=t.data[0].timezone,console.log(`Weather: ${e.weather}\nTemp: ${e.temp}\nTimezone: ${e.timezone}`),Client.postReq("http://localhost:8080/addWeather",e)})};var r=async e=>{e.country;await fetch("http://localhost:8080/result").then(e=>e.json()).then(async t=>{const n=t.city;await fetch("https://pixabay.com/api/?image_type=photo&category=places&q="+n+"&key=16029583-bf5e5ed8613792b6ce8c7ce12").then(e=>e.json()).then(async t=>{e.picture=t.hits[0].webformatURL,console.log("Picture: "+e.picture),await Client.postReq("http://localhost:8080/addPicture",e)})})};const c={},i=document.querySelector("#loading"),u=document.querySelector("#description"),l=document.querySelectorAll(".results");var p=async()=>{i.style.display="block",i.style.opacity=1,u.style.opacity=0,await Client.geoNames(c),await Client.weatherBit(c),await Client.pixaBay(c),await Client.updateUi(),u.style.display="none";for(let e of l)e.style.opacity=1;i.style.opacity=0,i.style.display="none"};var s=async(e,t)=>{await fetch(e,{method:"POST",credentials:"same-origin",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>{try{e.json()}catch(e){console.error("oh :(, ",e)}})};const d=(e,t="",n="",a="")=>{const o=document.createElement(e);return o.id=a,o.classList.add(n),o.innerHTML=t,o};var y=async()=>{await fetch("http://localhost:8080/result").then(e=>e.json()).then(e=>{const t=document.querySelector("#main"),n=d("section","","results"),a=d("h2",`Target: ${e.city}, ${e.country}`,"result-header"),o=d("div","","location-data"),r=d("div","","data"),c=d("p","Timezone: ","timezone"),i=d("span",""+e.timezone,"value"),u=d("p","Temperature: ","temperature"),l=d("span",""+e.temp,"value"),p=d("p","Weather: ","weather"),s=d("span",""+e.weather,"value"),y=document.querySelector("#start-date").value,m=document.querySelector("#end-date").value,f=d("p","Trip Date: ","trip-date"),h=d("span",""+((e,t)=>{function n(e){return new Date(e)}function a(e,t){return Math.round((t-e)/864e5)}var o,r;return e=n(e),t=n(t),a(o=e,r=t)>=2?a(o,r)+" days":a(o,r)+" day"})(y,m),"trip-data-value"),v=document.createElement("img");v.src=e.picture,v.alt=`${e.city}, ${e.country}`,n.append(v),u.append(l),p.append(s),c.append(i),f.append(h),r.append(c),r.append(u),r.append(p),r.append(f),o.append(a),o.append(r),n.append(o);const g=document.createElement("input");g.type="button",g.value="remove",g.classList.add("remove-btn"),g.addEventListener("click",e=>{e.preventDefault(),g.parentNode.remove()}),n.append(g),t.append(n)})};n(0),n(1),n.p,n(2),n(3);document.querySelector("#submit").addEventListener("click",e=>{e.preventDefault(),p()}),window.addEventListener("keydown",e=>{13===e.code&&p()})}]);